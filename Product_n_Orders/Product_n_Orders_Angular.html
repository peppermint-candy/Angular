<!DOCTYPE html>
<html ng-app = 'app'>
<head>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script src="../bower_components/angular/angular.js"></script>
	<script src='main.js'></script>
		<title>Product with Factory</title>
	</head>
	<body>
		<div ng-controller='productController'>
			<fieldset>
				<legend>Product Controllers</legend>
				<form ng-submit="create();">
					<label>Product Name:</label>
					<input type="text" name="name" ng-model="product.name"><br><br>
					<label>Product Price:</label>
					<input type="number" step='0.01' name="price" ng-model='product.price'><br><br>
					<input type="submit" value="Add Product"><br><br>
				</form><br><br>

				<div id="display">
					<table>
						<thead>
							<th>Product Name</th>
							<th>Product Price</th>
							<th>Actions</th>
						</thead>
						<tbody ng-repeat="product in products">
							<tr>
								<td> {{ product.name }} </td>
								<td> {{ product.price | currency }} </td>
								<td>	
										<button ng-click='delete($index)'>Delete</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>		
			</fieldset>
		</div>
		<div ng-controller= 'orderController'>
			<fieldset>
				<legend>Orders Controller</legend>
				<div id="display">
					<table>
						<thead>
							<th>Product Name</th>
							<th>Product Price</th>
							<th>Qty Available</th>
							<th>Actions</th>
						</thead>
						<tbody ng-repeat="product in products">
							<tr>
								<td> {{ product.name }} </td>
								<td> {{ product.price | currency }} </td>
								<td> {{ product.quantity }} </td>
								<td ng-if="product.quantity > 0">
										<button ng-click='buy($index)'>Buy</button>
								</td>
								<td ng-if="product.quantity == 0">Out of Stock</td>
							</tr>
						</tbody>
					</table>
				</div>	
			</fieldset>
		</div>
	</body>
	</html>